<div class="container">
	<%= form_with model: @order do |f| %>
		<% if @order.errors.any? %>
			<div id="error_explanation">
				<ul>
					<% @order.errors.full_messages.each do |message| %>
						<li><%= message %></li>
					<% end %>
				</ul>
			</div>
		<% end %>
		<div class="form-group">
			<%= f.label :number, "Number:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.number_field :number, min: 0,placeholder: "Enter Number",  class: "form-control" %>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :customer_id, "Customer Name:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.collection_select :customer_id, Customer.all,:id,:name,{prompt:'Select Customer'},{class: "form-control"} %>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :brand_id, "Brand Name:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.collection_select :brand_id, Brand.all,:customer_id,:name,{prompt: "Select Brand"}, {class: "form-control"} %>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :count, "Count:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.number_field :count, min: 0,placeholder: "Enter Count",  class: "form-control" %>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :price, "Price:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.number_field :price, min: 0,step: 0.05,placeholder: "Enter Price",  class: "form-control" %>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :signed, "Signed Date:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.date_field :signed,placeholder: "Enter Signed Date",class: "form-control", :id => "datepicker"%>
			</div>
		</div>
		<div class="form-group">
			<%= f.label :due, "Due Date:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.date_field :due,placeholder: "Enter Due Date",class: "form-control", :id => "datepicker"%>
			</div>
		</div>
		
		<div class="form-group">
			<%= f.label :in_production, "In Production?:", class: "col-md-4 control-label" %>
			<div class="col-md-8">
				<%= f.select :in_production, [['None', false], ['Yes', true]],{}, class: "form-control"%>
			</div>
		</div>
		<div class="form-group">
			<%= f.submit "Save", class: "btn btn-default btn-primary" %>
		</div>
	<% end %>
</div>
<script>
$(window).on('load', function() {
  $("#order_brand_id").children().each(function() {
      let option = $(this);
        option.css('display', 'none');
  });
});
jQuery(function( $ ){
	if ($("#order_customer_id").val() != '' ){
		$("#order_brand_id").prop('disabled', true);
	}
	
  $("#order_customer_id").on('change',function() {
		$("#order_brand_id").prop('disabled', false);
		$("#order_brand_id").val("");
		const client = $(this).val();
		console.log(client);
    $("#order_brand_id").children().each(function() {
      $(this).css('display', '');
    });
    
    $("#order_brand_id").children().each(function() {
      let option = $(this);
      if (option.val() != client) {
        option.css('display', 'none');
      }
    });
  });
});
</script>